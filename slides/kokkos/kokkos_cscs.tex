%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% 
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% 
\begin{frame}
  \frametitle{Hands-On 7 - Reaction-Diffusion Fisher equation (1)}

  \hypertarget{handson7}{}
  \begin{itemize}
  \item \textcolor{red}{\textbf{SETUP}}: we will use git to download this miniApp code designed at \myhref{http://www.cscs.ch/index.html}{CSCS} for HPC teaching purpose, and modified for testing Kokkos.
  \end{itemize}
  % See file \myurl{code/miniapps/SummerSchool2016/readme.md} to know how
  % to download the code 
  \fbox{\parbox{\textwidth}{
      \begin{itemize}
      \item \texttt{cd \$HOME/patc\_kokkos/code/miniapps/SummerSchool2016}
      \item \texttt{git clone https://github.com/pkestene/SummerSchool2016.git}
      \item \texttt{cd Summerschool2016; git checkout kokkos}
      \end{itemize}
    }
  }

  \begin{itemize}
  \item \textbf{This material contains multiple versions} of a \textcolor{violet}{\textbf{Reaction-Diffusion PDE solver (Fisher equation used e.g. in popualtion dynamics)}}. We will contribute two Kokkos versions of this solver.
    $$ \frac{\partial s}{\partial t} = D \left( \frac{\partial^2 s}{\partial x^2} + \frac{\partial^2 s}{\partial y^2} \right) + R s (1-s) = 0$$
  \end{itemize}
  
\end{frame}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% 
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% 
\begin{frame}
  \frametitle{Hands-On 7 - Reaction-Diffusion Fisher equation (2)}

  \begin{enumerate}
  \item \textbf{Explore/Read slides about the Fisher solver:}\\
    {\footnotesize \texttt{\$HOME/patc\_kokkos/code/miniapps/SummerSchool2016/miniapp/kokkos/serial/miniapp.pdf}}
    \begin{itemize}
    \item Explore the \textcolor{red}{serial} version of the Fisher solver.
    \end{itemize}
  \item These \textbf{Kokkos exercises} are routed to use \texttt{KOKKOS\_PATH} env variable; use the following command line as a starting point
    %the \textcolor{darkgreen}{\textbf{modulefiles}}:
    \begin{itemize}
    \item \texttt{make KOKKOS\_DEVICES=OpenMP}
    \item \texttt{make KOKKOS\_DEVICES=Cuda,OpenMP KOKKOS\_ARCH=Kepler37}
    \item example run: \texttt{./fisher.openmp 128 128 100 0.01}
\end{itemize}
  \item \textcolor{blue}{\textbf{Kokkos version 1}} / Exercice with \texttt{KOKKOS\_LAMBDA} / Already pre-filled, some TODOs
    \begin{itemize}
    \item Open and read file \texttt{miniapp/kokkos/cxx/readme.txt}
    \item Fill the TODO with Kokkos LAMBDA kernels
    \end{itemize}
  \item \textcolor{blue}{\textbf{Kokkos version 2}} : already done
    \begin{itemize}
    \item The main difference between version 1 and 2 is how the c++ class \texttt{DataWareHouse} is designed
    \item Just build and compare performance with version 1, with Kokkos device OpenMP(Power8) and then Cuda
    \end{itemize}
  \end{enumerate}
\end{frame}
